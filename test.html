<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë°©íƒˆì¶œ ì¶”ì²œ AI</title>

<style>
body{
    margin:0;
    font-family:'Pretendard', sans-serif;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    color:white;
}

.container{
    width:100%;
    max-width:480px;
    padding:20px;
}

.card{
    background:rgba(255,255,255,0.08);
    backdrop-filter:blur(15px);
    padding:25px;
    border-radius:25px;
    box-shadow:0 15px 40px rgba(0,0,0,0.4);
    text-align:center;
    animation:fadeIn 0.8s ease;
}

@keyframes fadeIn{
    from{opacity:0; transform:translateY(20px);}
    to{opacity:1; transform:translateY(0);}
}

.ai-glow{
    font-size:22px;
    font-weight:bold;
    background:linear-gradient(90deg,#00f2ff,#8e2de2);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    animation:glow 2s infinite alternate;
}

@keyframes glow{
    from{text-shadow:0 0 5px #00f2ff;}
    to{text-shadow:0 0 20px #8e2de2;}
}

.progress-container{
    width:100%;
    height:8px;
    background:rgba(255,255,255,0.2);
    border-radius:20px;
    overflow:hidden;
    margin-bottom:10px;
}

.progress-bar{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#00f2ff,#8e2de2);
    transition:0.3s;
}

img{
    width:100%;
    max-width:100%;
    height:auto;
    max-height:400px;
    object-fit:contain;
    border-radius:15px;
    margin:15px 0;
    background:#111;
}

button{
    width:100%;
    padding:14px;
    margin:8px 0;
    border:none;
    border-radius:15px;
    font-size:16px;
    font-weight:bold;
    cursor:pointer;
    transition:0.2s;
}

button:hover{
    transform:scale(1.03);
}

.answer-btn{
    background:linear-gradient(90deg,#00f2ff,#8e2de2);
    color:white;
}

.back-btn{
    background:#999;
    color:white;
}

.hidden{ display:none; }

.footer{
    margin-top:20px;
    font-size:13px;
    opacity:0.7;
}
</style>
</head>
<body>

<div class="container">

<!-- ì¸íŠ¸ë¡œ -->
<div id="introCard" class="card">
    <div class="ai-glow">ì•ˆë…•í•˜ì„¸ìš”.</div>
    <p>ë°©íƒˆì¶œ ì¶”ì²œ AIì…ë‹ˆë‹¤.</p>
    <button class="answer-btn" onclick="startQuiz()">ì‹œì‘í•˜ê¸°</button>
    <div class="footer">ì œì‘ì: ë…•í€,ash</div>
</div>

<!-- í€´ì¦ˆ -->
<div id="quizCard" class="card hidden">
    <div class="progress-container">
        <div id="progressBar" class="progress-bar"></div>
    </div>
    <div id="progressText"></div>

    <h2 id="questionText"></h2>
    <img id="questionImage" class="hidden" alt="question image">

    <button class="answer-btn" onclick="answer(0)"></button>
    <button class="answer-btn" onclick="answer(1)"></button>

    <button id="backBtn" class="back-btn hidden" onclick="goBack()">â† ì´ì „</button>
</div>

<!-- ê²°ê³¼ -->
<div id="resultCard" class="card hidden">
    <h2 id="resultTitle"></h2>
    <img id="resultImage" alt="result image">
    <p id="resultDesc"></p>

    <button onclick="shareResult()" class="answer-btn">ğŸ“¤ ê³µìœ í•˜ê¸°</button>
    <button onclick="restartQuiz()" class="back-btn">ğŸ”„ ì²˜ìŒìœ¼ë¡œ</button>
</div>

</div>

<script>
let currentQuestion = 1;
let group = null;
let answerHistory = [];          // ê¸°ì¡´ history ë°°ì—´ ì´ë¦„ ì¶©ëŒ ë°©ì§€
let selectedResultIndex = null;  // ê³µìœ ìš©(ê²°ê³¼ ì¸ë±ìŠ¤)

const QUESTIONS = [
{ text:"íƒ±ì¸ê°€ìš”? ì«„ì¸ê°€ìš”?", img:"", answers:["íƒ±","ì«„"] },
{ text:"ì¹œêµ¬ê³¼ ë°©íƒˆì¶œì„ ê°€ìê³  ì—°ë½í–ˆë‹¤. ë‚˜ì˜ ë°˜ì‘ì€?", img:"", answers:["'ì¥ë¥´ë¨¸ì•¼? í¬ìŠ¤í„°ëŠ”?' ì§ˆë¬¸í˜•","'ã…‡ã…‹' ë¬´ë‡Œí˜•"]},
{ text:"ë°©íƒˆì¶œ ì¹´í˜ì— ë„ì°©í–ˆëŠ”ë° ì§ì›ì´ ë„ˆë¬´ ë¶ˆì¹œì ˆí•˜ë‹¤. ë‚˜ì˜ ë°˜ì‘ì€?", img:"", answers:["'ì¥ë‚œì¹˜ë‚˜ ë­í•˜ëŠ”ë°ìš”' í…Œí† í˜•","'ì–´í›„...ì™œ ì €ëŸ¬ëƒ í…Œë§ˆë‚˜í•˜ì' ì—ê²í˜•"] },
{ text:"í…Œë§ˆë¥¼ ì§„í–‰ ì¤‘ ë¶„ë¦¬ êµ¬ê°„ì´ ë‚˜ì™”ë‹¤. ì¹œêµ¬ëŠ” ëª»ê°„ë‹¤ê³  ì§•ì§•ê±°ë¦´ ë•Œ ë‚˜ì˜ ë°˜ì‘ì€?", img:"", answers:["'ì‘~ë‚˜ë§Œ ì•„ë‹ˆë©´ ë¼~' íšŒí”¼í˜•","'ã…‹..ì´ê²Œ ë¬´ì„­ëƒ ë‚´ê°€ ë“¤ì–´ê°€ì§€' í—ˆì„¸í˜•"] },
{ text:"ëˆˆ ì•ì— í¼ì³ì§€ëŠ” ì—„ì²­ë‚œ ì—°ì¶œ. ë‚˜ì˜ í–‰ë™ì€?", img:"", answers:["'í•˜ë‚˜ë„ ë†“ì¹  ìˆ˜ ì—†ì–´! ëˆˆê°ì§€ë§ˆ! ì¹œêµ¬ëˆˆë„ ëœ¨ê²Œí•´ì£¼ëŠ”' ê°œë°©í˜•","'ëª°ë¼ ë¬´ì„œì›Œ ëˆˆ ê¼­ ê°ëŠ”' íì‡„í˜•"] },
{ text:"ê°‘ìê¸° ìš¸ë¦¬ëŠ” 'ì‚‘ë”±ì¾…!' ë‹¹ì‹ ì˜ ë°˜ì‘ì€? ", img:"", answers:["'? ë°˜ì‘ ëŠë¦°' ê±°ë¶í˜•","'ì–´ë§›! í•˜ìë§ˆì êµ¬ì„ê°€ëŠ”' ì€ë‘”ì™¸í†¨ì´í˜•"] },
{ text:"íƒˆì¶œì´ ì½”ì•ì¸ë° ì‹œê°„ì´ ì—†ë‹¤. ë‚˜ì˜ í–‰ë™ì€?", img:"", answers:["'ë…¸íŒë…¸íƒˆ' ê³ ì§‘í˜•","'íŒíŠ¸ê°€ ë‚ ê°œë¥¼ ë‹¬ì•„ì¤˜' ë ˆë“œë¶ˆí˜• "] },
{ text:"'ë“œë””ì–´ íƒˆì¶œì´ë‹¤!' ë‚˜ì˜ í–‰ë™ì€?", img:"", answers:["'ì†Œìš¸ì„ ë‹´ì•„ ë³´ë“œíŒì„ ê¾¸ë¯¼ë‹¤' í”¼ì¹´ì†Œí˜•","'ì•ˆë…•íˆê³„ì„¸ìš”' ë„ë§ìí˜•"] },
{ text:"ì§‘ì— ë„ì°©í–ˆë‹¤. ë‚˜ì˜ í–‰ë™ì€?", img:"", answers:["'í…Œë§ˆëŠ” ì–´ë• ê³ ..ê¸°ë¡í•˜ì' ê¸°ë¡í˜•","'ì•„ìš° ì¬ë°Œì—ˆë‹¤. ìì•¼ì§€' ê¿ˆë‚˜ë¼í˜•"] },
{ text:"í™œë™ ì—´ì‹¬íˆ í•˜ì‹¤ê±°ì£ ?", img:"image/bsnc.png", answers:["ì˜ˆ","ì˜ˆ"] }
];

const A_RESULTS = [
{ title:"ê°€ì•”ì„±ë‹¹", img:"image/horror/garm.png", desc:"ê°€ì•”ì„±ë‹¹" },
{ title:"ì•„ì•¼ì½”", img:"image/horror/ayako.png", desc:"ì•„ì•¼ì½”" },
{ title:"ìš°ì •", img:"image/horror/oohjung.png", desc:"ìš°ì •" },
{ title:"íˆ¬íˆ¬ ì–´ë“œë²¤ì²˜", img:"image/horror/tootoo.png", desc:"íˆ¬íˆ¬ ì–´ë“œë²¤ì²˜" },
{ title:"ìŠ¬ë˜ì…”", img:"image/horror/slasher.png", desc:"ìŠ¬ë˜ì…”" },
{ title:"ë‹¹ì‹  ì—†ì´ëŠ”", img:"image/horror/withoutyou.png", desc:"ë‹¹ì‹  ì—†ì´ëŠ”" },
{ title:"ì œì¼ê¸°ìˆ™í•™ì›", img:"image/horror/jeil.png", desc:"ì œì¼ê¸°ìˆ™í•™ì›" },
{ title:"í”¼ê·¸", img:"image/horror/pig.png", desc:"í”¼ê·¸" },
{ title:"í”¼ë…¸í‚¤ì˜¤", img:"image/horror/pinocchio.png", desc:"í”¼ë…¸í‚¤ì˜¤" },
{ title:"ìƒì¡´ì", img:"image/horror/survivor.png", desc:"ìƒì¡´ì" },
{ title:"ë²„ë””", img:"image/horror/buddy.png", desc:"ë²„ë””" },
{ title:"ì„ íƒ", img:"image/horror/choice.png", desc:"ì„ íƒ" },
{ title:"í•˜í”¼ìŠ¤ ìº”ë””ìƒµ", img:"image/horror/harpy's.jpg", desc:"í•˜í”¼ìŠ¤ ìº”ë””ìƒµ" }
];

const B_RESULTS = [
{ title:"ë¨¸ë‹ˆë¨¸ë‹ˆíŒ¨í‚¤ì§€", img:"image/out horror/mmpakage.png", desc:"ë¨¸ë‹ˆë¨¸ë‹ˆíŒ¨í‚¤ì§€" },
{ title:"í•„ë¦„ ë°”ì´ ì—ë””", img:"image/out horror/f-eddy.png", desc:"í•„ë¦„ ë°”ì´ ì—ë””" },
{ title:"í•„ë¦„ ë°”ì´ ìŠ¤í‹°ë¸Œ", img:"image/out horror/f-steve.png", desc:"í•„ë¦„ ë°”ì´ ìŠ¤í‹°ë¸Œ" },
{ title:"í•„ë¦„ ë°”ì´ ë°¥", img:"image/out horror/f-bob.png", desc:"í•„ë¦„ ë°”ì´ ë°¥" },
{ title:"ì¿ í‚¤", img:"image/out horror/cookie.png", desc:"ì¿ í‚¤" },
{ title:"ë‘ê»ì•„ ë‘ê»ì•„ í—Œì§‘ì¤„ê²Œ ìƒˆì§‘ë‹¤ì˜¤", img:"image/out horror/dudu.png", desc:"ë‘ê»ì•„ ë‘ê»ì•„ í—Œì§‘ì¤„ê²Œ ìƒˆì§‘ë‹¤ì˜¤" },
{ title:"ë©”ê°€ ê²Œì„", img:"image/out horror/mega-game.png", desc:"ë©”ê°€ ê²Œì„" },
{ title:"í€´ì¦ˆ ì¹´í˜", img:"image/out horror/quiz-cafe.png", desc:"í€´ì¦ˆ ì¹´í˜" },
{ title:"ê²Œì„ì˜ ë²•ì¹™", img:"image/out horror/rule-game.png", desc:"ê²Œì„ì˜ ë²•ì¹™" },
{ title:"ì‚¬ìš”ë‚˜ë¼ ì„¸ì´ì½”!", img:"image/out horror/seiko.jpg", desc:"ì‚¬ìš”ë‚˜ë¼ ì„¸ì´ì½”!" },
{ title:"ë°”ì•¼íë¡œ, ì—¬ë¦„ì´ì—ˆë‹¤.", img:"image/out horror/summer.jpg", desc:"ë°”ì•¼íë¡œ, ì—¬ë¦„ì´ì—ˆë‹¤." },
{ title:"ìš©íŒ”ë„ë ¹", img:"image/out horror/yong8.png", desc:"ìš©íŒ”ë„ë ¹" }
];

function playClickSound(){
    const ctx = new (window.AudioContext || window.webkitAudioContext)();

    const osc = ctx.createOscillator();
    const gainNode = ctx.createGain();

    osc.type = "sine";
    osc.frequency.value = 440;

    gainNode.gain.setValueAtTime(0, ctx.currentTime);
    gainNode.gain.linearRampToValueAtTime(0.05, ctx.currentTime + 0.02);
    gainNode.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.15);

    osc.connect(gainNode);
    gainNode.connect(ctx.destination);

    osc.start();
    osc.stop(ctx.currentTime + 0.15);
}

function startQuiz(){
    playClickSound();
    document.getElementById("introCard").classList.add("hidden");
    document.getElementById("quizCard").classList.remove("hidden");
    loadQuestion();
}

function loadQuestion(){
    const q = QUESTIONS[currentQuestion-1];
    document.getElementById("questionText").innerText = q.text;

    const imgEl = document.getElementById("questionImage");
    if (q.img) {
        imgEl.src = q.img;
        imgEl.classList.remove("hidden");
    } else {
        imgEl.removeAttribute("src");
        imgEl.classList.add("hidden");
    }

    const btns = document.querySelectorAll("#quizCard .answer-btn");
    btns[0].innerText = q.answers[0];
    btns[1].innerText = q.answers[1];

    updateProgress();
}

function updateProgress(){
    document.getElementById("progressText").innerText =
        currentQuestion + " / " + QUESTIONS.length;
    document.getElementById("progressBar").style.width =
        ((currentQuestion-1)/QUESTIONS.length)*100 + "%";
}

function answer(choice){
    playClickSound();
    answerHistory.push(choice);

    if(currentQuestion === 1){
        group = choice === 0 ? "A" : "B";
    }

    if(currentQuestion < QUESTIONS.length){
        currentQuestion++;
        document.getElementById("backBtn").classList.remove("hidden");
        loadQuestion();
    } else {
        showResult();
    }
}

function goBack(){
    if (currentQuestion <= 1) return;

    currentQuestion--;
    answerHistory.pop();

    if(currentQuestion === 1){
        document.getElementById("backBtn").classList.add("hidden");
        group = null; // ì²« ì§ˆë¬¸ìœ¼ë¡œ ëŒì•„ê°€ë©´ ê·¸ë£¹ë„ ë¦¬ì…‹
    }
    loadQuestion();
}

function showResult(){
    document.getElementById("quizCard").classList.add("hidden");
    document.getElementById("resultCard").classList.remove("hidden");

    const results = group === "A" ? A_RESULTS : B_RESULTS;
    selectedResultIndex = Math.floor(Math.random() * results.length);
    const r = results[selectedResultIndex];

    document.getElementById("resultTitle").innerText = r.title;
    document.getElementById("resultDesc").innerText = r.desc;
    document.getElementById("resultImage").src = r.img;

    // ê³µìœ  ë§í¬(ê¹ƒí—™ í˜ì´ì§€) ë§Œë“¤ê¸°: ?g=A&r=3
    const u = new URL(window.location.href);
    u.searchParams.set("g", group);
    u.searchParams.set("r", String(selectedResultIndex));
    window.history.replaceState(null, "", u.toString());
}

async function shareResult(){
    if (!group || selectedResultIndex === null) return;

    const title = document.getElementById("resultTitle").innerText;
    const desc  = document.getElementById("resultDesc").innerText;

    const u = new URL(window.location.href);
    u.searchParams.set("g", group);
    u.searchParams.set("r", String(selectedResultIndex));
    const shareUrl = u.toString();

    const shareData = {
        title: "ë°©íƒˆì¶œ ì¶”ì²œ ê²°ê³¼",
        text: `ë‚´ ê²°ê³¼: ${title}\n${desc}\n\në§í¬ ì—´ë©´ ê²°ê³¼ê°€ ê·¸ëŒ€ë¡œ ë– ìš”!`,
        url: shareUrl
    };

    // ì§€ì›ë˜ëŠ” ë¸Œë¼ìš°ì €(ì£¼ë¡œ ëª¨ë°”ì¼): ê³µìœ  ì‹œíŠ¸
    if (navigator.share) {
        try {
            await navigator.share(shareData);
            return;
        } catch (err) {
            console.log("ê³µìœ  ì·¨ì†Œ/ì˜¤ë¥˜", err);
        }
    }

    // fallback: ë§í¬ ë³µì‚¬
    try {
        await navigator.clipboard.writeText(shareUrl);
        alert("ê³µìœ  ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\në¶™ì—¬ë„£ê¸° í•´ì„œ ë³´ë‚´ë©´ ë¼ìš”.");
    } catch (e) {
        window.prompt("ì•„ë˜ ë§í¬ë¥¼ ë³µì‚¬í•´ì„œ ê³µìœ í•˜ì„¸ìš”:", shareUrl);
    }
}

function restartQuiz(){
    currentQuestion = 1;
    group = null;
    answerHistory = [];
    selectedResultIndex = null;

    document.getElementById("resultCard").classList.add("hidden");
    document.getElementById("quizCard").classList.add("hidden");
    document.getElementById("introCard").classList.remove("hidden");
    document.getElementById("backBtn").classList.add("hidden");

    // ì£¼ì†Œì°½ íŒŒë¼ë¯¸í„° ì œê±°
    const u = new URL(window.location.href);
    u.search = "";
    window.history.replaceState(null, "", u.toString());
}

// ë§í¬ë¡œ ë“¤ì–´ì˜¤ë©´ ê²°ê³¼ í™”ë©´ì„ ë°”ë¡œ ë³µì›: ?g=A&r=3
function loadResultFromURL(){
    const u = new URL(window.location.href);
    const g = u.searchParams.get("g");
    const r = u.searchParams.get("r");

    if (!g || r === null) return;

    const results = (g === "A") ? A_RESULTS : (g === "B" ? B_RESULTS : null);
    if (!results) return;

    const idx = Number(r);
    if (!Number.isInteger(idx) || idx < 0 || idx >= results.length) return;

    group = g;
    selectedResultIndex = idx;

    // í™”ë©´ ì „í™˜
    document.getElementById("introCard").classList.add("hidden");
    document.getElementById("quizCard").classList.add("hidden");
    document.getElementById("resultCard").classList.remove("hidden");

    const res = results[idx];
    document.getElementById("resultTitle").innerText = res.title;
    document.getElementById("resultDesc").innerText = res.desc;
    document.getElementById("resultImage").src = res.img;
}

window.addEventListener("DOMContentLoaded", loadResultFromURL);
</script>
</body>
</html>
